<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N5 Biology Cell Biology Flashcards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
            gap: 15px;
        }
        
        .topic-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .action-controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .control-btn i {
            font-size: 1.1rem;
        }
        
        .topic-filter {
            background: white;
            color: #333;
        }
        
        .topic-filter.active {
            background: #4CAF50;
            color: white;
        }
        
        .flip-all-definitions {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .flip-all-terms {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .quiz-mode {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
        }
        
        .quiz-mode.active {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
            border: 3px solid #ff6b6b;
        }
        
        .view-controls {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            color: #333;
        }
        
        .mode-indicator {
            display: inline-block;
            padding: 5px 15px;
            background: #ff6b6b;
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .flashcard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .flashcard {
            height: 200px;
            perspective: 1000px;
            cursor: pointer;
            position: relative;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .flashcard-front {
            background: white;
            color: #333;
            border-left: 8px solid #667eea;
        }
        
        .flashcard-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
            border-left: 8px solid #f5576c;
        }
        
        .term {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .definition {
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .topic-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }
        
        .hint {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.7;
            color: #666;
        }
        
        .card-actions {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            gap: 10px;
        }
        
        .card-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .card-btn:hover {
            transform: scale(1.2);
        }
        
        .master-btn {
            background: #4CAF50;
            color: white;
        }
        
        .master-btn.mastered {
            background: #FFD700;
            color: #333;
        }
        
        .flag-btn {
            background: #ff6b6b;
            color: white;
        }
        
        .flag-btn.flagged {
            background: #ff4757;
            color: white;
        }
        
        .mastered-badge, .flagged-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            z-index: 10;
        }
        
        .mastered-badge {
            background: #FFD700;
            color: #333;
        }
        
        .flagged-badge {
            background: #ff4757;
        }
        
        .quiz-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }
        
        .quiz-question {
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quiz-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }
        
        .quiz-option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .quiz-option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quiz-stats {
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .quiz-next {
            padding: 10px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
        }
        
        .stats {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.5s ease;
        }
        
        .counter {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .filter-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 15px;
            background: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background: #667eea;
            color: white;
        }
        
        @media (max-width: 768px) {
            .flashcard-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .main-controls {
                flex-direction: column;
            }
            
            .topic-controls, .action-controls {
                width: 100%;
                justify-content: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }
        
        .topic-1 { background: #667eea; } /* Cell Structure */
        .topic-2 { background: #4CAF50; } /* Transport */
        .topic-3 { background: #FF9800; } /* DNA */
        .topic-4 { background: #E91E63; } /* Proteins */
        .topic-5 { background: #9C27B0; } /* Genetic Engineering */
        .topic-6 { background: #009688; } /* Respiration */
        .topic-7 { background: #2ecc71; }   /* Ecosystems */
.topic-8 { background: #1abc9c; }   /* Distribution */
.topic-9 { background: #f1c40f; }   /* Photosynthesis */
.topic-10 { background: #e67e22; }  /* Energy */
.topic-11 { background: #27ae60; }  /* Food Production */
.topic-12 { background: #8e44ad; }  /* Evolution */

        .topic-glossary { background: #795548; } /* Glossary */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>National 5 Biology Flashcards <span id="modeIndicator" class="mode-indicator" style="display: none;">Quiz Mode</span></h1>
            <p class="subtitle" id="subtitle">Click cards to flip | Use buttons to filter or flip all</p>
        </header>
        
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-question" id="quizQuestion">
                <!-- Question will appear here -->
            </div>
            <div class="quiz-options" id="quizOptions">
                <!-- Options will appear here -->
            </div>
            <div class="quiz-controls">
                <div class="quiz-stats" id="quizStats">
                    Question 1 of 10 | Score: 0/0
                </div>
                <button class="quiz-next" id="quizNext">Next Question</button>
            </div>
        </div>
        
        <div class="main-controls">
            <div class="topic-controls">
                <button class="control-btn topic-filter active" data-topic="all">
                    <i class="fas fa-layer-group"></i> All Topics
                </button>
                <button class="control-btn topic-filter" data-topic="1">
                    <i class="fas fa-cell"></i> Cell Structure
                </button>
                <button class="control-btn topic-filter" data-topic="2">
                    <i class="fas fa-exchange-alt"></i> Transport
                </button>
                <button class="control-btn topic-filter" data-topic="3">
                    <i class="fas fa-dna"></i> DNA
                </button>
                <button class="control-btn topic-filter" data-topic="4">
                    <i class="fas fa-flask"></i> Enzymes
                </button>
                <button class="control-btn topic-filter" data-topic="5">
                    <i class="fas fa-dna"></i> Genetic Eng.
                </button>
                <button class="control-btn topic-filter" data-topic="6">
                    <i class="fas fa-fire"></i> Respiration
                </button>
                <button class="control-btn topic-filter" data-topic="glossary">
                    <i class="fas fa-book"></i> Glossary
                </button>
                <button class="control-btn topic-filter" data-topic="7">
    <i class="fas fa-leaf"></i> Ecosystems
</button>
<button class="control-btn topic-filter" data-topic="8">
    <i class="fas fa-map"></i> Distribution
</button>
<button class="control-btn topic-filter" data-topic="9">
    <i class="fas fa-sun"></i> Photosynthesis
</button>
<button class="control-btn topic-filter" data-topic="10">
    <i class="fas fa-chart-pyramid"></i> Energy
</button>
<button class="control-btn topic-filter" data-topic="11">
    <i class="fas fa-tractor"></i> Food Prod.
</button>
<button class="control-btn topic-filter" data-topic="12">
    <i class="fas fa-dna"></i> Evolution
</button>


            </div>
            
            <div class="action-controls">
                <button class="control-btn flip-all-terms" id="flipAllTerms">
                    <i class="fas fa-undo"></i> Flip All to Terms
                </button>
                <button class="control-btn flip-all-definitions" id="flipAllDefinitions">
                    <i class="fas fa-sync-alt"></i> Flip All to Definitions
                </button>
                <button class="control-btn quiz-mode" id="quizModeToggle">
                    <i class="fas fa-question-circle"></i> Quiz Mode
                </button>
                <button class="control-btn view-controls" id="toggleViewControls">
                    <i class="fas fa-eye"></i> Show Only: <span id="viewFilterText">All</span>
                </button>
            </div>
        </div>
        
        <div class="filter-options" id="viewControls" style="display: none;">
            <button class="filter-btn" data-view="all">All Cards</button>
            <button class="filter-btn" data-view="mastered">Mastered</button>
            <button class="filter-btn" data-view="unmastered">Not Mastered</button>
            <button class="filter-btn" data-view="flagged">Flagged</button>
            <button class="filter-btn" data-view="unflagged">Not Flagged</button>
        </div>
        
        <div class="flashcard-grid" id="flashcardContainer">
            <!-- Flashcards will be inserted here by JavaScript -->
        </div>
        
        <div class="stats">
            <p>Total Flashcards: <span class="counter" id="totalCards">0</span> | 
            Currently Viewing: <span class="counter" id="visibleCards">0</span></p>
            <p>Mastered: <span class="counter" id="masteredCount">0</span> | 
            Flagged: <span class="counter" id="flaggedCount">0</span></p>
            <div class="progress-bar">
                <div class="progress-fill" id="masteryProgress" style="width: 0%"></div>
            </div>
            <p><em>Click any card to flip it. Use buttons above to filter or flip all cards at once.</em></p>
        </div>
    </div>

    <script>
        // Flashcards Data
        const flashcards = [
            // Topic 1: Cell Structure
            { term: "Cell", definition: "The basic unit of life.", topic: "1" },
            { term: "Organelle", definition: "A structure within a cell that carries out a specific function.", topic: "1" },
            { term: "Ultrastructure", definition: "The detailed structure of a cell as seen under high magnification.", topic: "1" },
            { term: "Nucleus", definition: "A membrane-bound organelle containing DNA; controls cell activities.", topic: "1" },
            { term: "Cytoplasm", definition: "The site of chemical reactions in a cell.", topic: "1" },
            { term: "Cell membrane", definition: "A selectively permeable membrane that controls entry and exit of molecules.", topic: "1" },
            { term: "Ribosome", definition: "The site of protein synthesis.", topic: "1" },
            { term: "Mitochondrion", definition: "The site of ATP production by aerobic respiration.", topic: "1" },
            { term: "Chloroplast", definition: "The site of sugar production by photosynthesis.", topic: "1" },
            { term: "Vacuole", definition: "Stores water, sugar, and salts in a solution called cell sap.", topic: "1" },
            { term: "Cell wall", definition: "A layer surrounding some cells; provides support and rigidity.", topic: "1" },
            { term: "Plasmid", definition: "A small ring of DNA in bacteria containing extra beneficial genes.", topic: "1" },
            { term: "Endosymbiotic theory", definition: "Theory that mitochondria and chloroplasts evolved from free-living bacteria.", topic: "1" },
            
            // Topic 2: Transport Across Cell Membranes
            { term: "Selectively permeable", definition: "Allows only certain substances to pass through.", topic: "2" },
            { term: "Phospholipid bilayer", definition: "The double layer of phospholipids forming the cell membrane.", topic: "2" },
            { term: "Diffusion", definition: "Movement of molecules from higher to lower concentration down a concentration gradient.", topic: "2" },
            { term: "Concentration gradient", definition: "Difference in concentration between two areas.", topic: "2" },
            { term: "Passive transport", definition: "Movement that does not require energy.", topic: "2" },
            { term: "Osmosis", definition: "Movement of water from higher to lower water concentration through a selectively permeable membrane.", topic: "2" },
            { term: "Turgid", definition: "A plant cell swollen with water; vacuole full, cell membrane pressed against wall.", topic: "2" },
            { term: "Plasmolysed", definition: "A plant cell that has lost water; vacuole shrinks, membrane pulls away from wall.", topic: "2" },
            { term: "Active transport", definition: "Movement of molecules against a concentration gradient; requires energy.", topic: "2" },
            
            // Topic 3: DNA and Protein Production
            { term: "DNA", definition: "A molecule that carries genetic information; double-stranded helix.", topic: "3" },
            { term: "Base pairing rule", definition: "Adenine (A) pairs with Thymine (T), Cytosine (C) pairs with Guanine (G).", topic: "3" },
            { term: "Gene", definition: "A section of DNA that codes for a protein.", topic: "3" },
            { term: "Messenger RNA (mRNA)", definition: "Carries a copy of the genetic code from DNA in the nucleus to the ribosome.", topic: "3" },
            
            // Topic 4: Proteins and Enzymes
            { term: "Protein", definition: "A molecule made of amino acids; folds into a 3D shape to perform functions.", topic: "4" },
            { term: "Structural protein", definition: "Provides support to cells/organisms.", topic: "4" },
            { term: "Enzyme", definition: "A biological catalyst; speeds up reactions without being used up.", topic: "4" },
            { term: "Active site", definition: "The region on an enzyme where the substrate binds.", topic: "4" },
            { term: "Substrate", definition: "The molecule an enzyme acts on.", topic: "4" },
            { term: "Degradation reaction", definition: "A reaction that breaks down molecules (e.g., starch → maltose).", topic: "4" },
            { term: "Synthesis reaction", definition: "A reaction that builds up molecules (e.g., glucose-1-phosphate → starch).", topic: "4" },
            { term: "Optimum conditions", definition: "The temperature and pH at which an enzyme works best.", topic: "4" },
            { term: "Denatured", definition: "When an enzyme's shape is permanently changed, so it no longer functions.", topic: "4" },
            
            // Topic 5: Genetic Engineering
            { term: "Genetic engineering", definition: "The transfer of genetic information from one cell to another.", topic: "5" },
            { term: "Genetically modified organism (GMO)", definition: "An organism that has had genes transferred into it.", topic: "5" },
            { term: "Plasmid", definition: "A small ring of DNA in bacteria used in genetic engineering.", topic: "5" },
            { term: "Stages of genetic engineering", definition: "Identify gene → extract gene → cut plasmid → insert gene → insert plasmid into host → grow GM cells.", topic: "5" },
            
            // Topic 6: Respiration
            { term: "Respiration", definition: "A series of enzyme-controlled reactions that release energy from glucose.", topic: "6" },
            { term: "ATP (adenosine triphosphate)", definition: "A molecule that transfers energy within cells.", topic: "6" },
            { term: "Aerobic respiration", definition: "Respiration using oxygen; produces CO₂, H₂O, and many ATP.", topic: "6" },
            { term: "Fermentation", definition: "Respiration without oxygen; produces lactate (animals) or ethanol + CO₂ (plants/yeast) and only 2 ATP.", topic: "6" },
            { term: "Pyruvate", definition: "The molecule produced in the first stage of respiration.", topic: "6" },

            // Topic 7: Ecosystems
{ term:"Species", definition:"A group of organisms which can interbreed and produce fertile offspring.", topic:"7" },
{ term:"Biodiversity", definition:"The range of species within an ecosystem.", topic:"7" },
{ term:"Population", definition:"A group of organisms of the same species.", topic:"7" },
{ term:"Producer", definition:"An organism which produces its own food.", topic:"7" },
{ term:"Consumer", definition:"An organism which consumes other organisms for food.", topic:"7" },
{ term:"Herbivore", definition:"An organism which only consumes plant matter.", topic:"7" },
{ term:"Carnivore", definition:"An organism which only consumes animal matter.", topic:"7" },
{ term:"Omnivore", definition:"An organism which consumes both plant and animal matter.", topic:"7" },
{ term:"Predator", definition:"An animal which hunts other animals (prey) for food.", topic:"7" },
{ term:"Prey", definition:"An organism which is hunted and killed by a predator.", topic:"7" },
{ term:"Food chain", definition:"A diagram which shows a simple feeding relationship between organisms.", topic:"7" },
{ term:"Food web", definition:"A diagram which shows the interconnection of food chains.", topic:"7" },
{ term:"Ecosystem", definition:"All organisms in a habitat and the non-living components they interact with.", topic:"7" },
{ term:"Niche", definition:"The role an organism plays within a community.", topic:"7" },
{ term:"Competition", definition:"Occurs when resources are in short supply.", topic:"7" },
{ term:"Interspecific competition", definition:"Competition between individuals of different species.", topic:"7" },
{ term:"Intraspecific competition", definition:"Competition between individuals of the same species.", topic:"7" },

// Topic 8: Distribution of Organisms
{ term:"Abiotic factors", definition:"Non-living factors such as light, moisture, pH, and temperature.", topic:"8" },
{ term:"Biotic factors", definition:"Living factors such as competition, disease, grazing, and predation.", topic:"8" },
{ term:"Indicator species", definition:"Species whose presence or absence indicates environmental quality.", topic:"8" },

// Topic 9: Photosynthesis
{ term:"Photosynthesis", definition:"A two-stage process converting light energy into chemical energy.", topic:"9" },
{ term:"Limiting factor", definition:"A factor that limits the rate of photosynthesis when in short supply.", topic:"9" },

// Topic 10: Energy in Ecosystems
{ term:"Pyramid of numbers", definition:"Shows the number of organisms at each level of a food chain.", topic:"10" },
{ term:"Pyramid of energy", definition:"Shows the energy stored in biomass at each trophic level.", topic:"10" },

// Topic 11: Food Production
{ term:"Fertilisers", definition:"Provide chemicals such as nitrates which increase crop yield.", topic:"11" },
{ term:"Pesticides", definition:"Chemicals that kill organisms which reduce crop yield.", topic:"11" },
{ term:"Bioaccumulation", definition:"The build-up of toxic substances in organisms over time.", topic:"11" },
{ term:"Biological control", definition:"Using natural predators to control pests.", topic:"11" },
{ term:"Algal bloom", definition:"The overgrowth of algae in water systems.", topic:"11" },

// Topic 12: Evolution of Species
{ term:"Mutation", definition:"A random change to genetic material.", topic:"12" },
{ term:"Mutagen", definition:"Something that increases the rate of mutation.", topic:"12" },
{ term:"Adaptation", definition:"An inherited feature that improves survival.", topic:"12" },
{ term:"Natural selection", definition:"Best adapted individuals survive and reproduce.", topic:"12" },
{ term:"Selection pressure", definition:"A factor affecting survival or reproduction.", topic:"12" },
{ term:"Speciation", definition:"The formation of new species.", topic:"12" },
{ term:"Isolation barrier", definition:"A barrier separating populations allowing separate evolution.", topic:"12" }

            // Glossary
            { term: "Aerobic", definition: "Requires oxygen.", topic: "glossary" },
            { term: "Bilayer", definition: "A structure composed of two layers.", topic: "glossary" },
            { term: "Catalyst", definition: "A substance that speeds up a reaction without being used up.", topic: "glossary" },
            { term: "Cellulose", definition: "A carbohydrate that makes up plant cell walls.", topic: "glossary" },
            { term: "Complementary", definition: "Matching in shape/structure.", topic: "glossary" },
            { term: "Pharmaceutical", definition: "Relating to medicinal drugs.", topic: "glossary" },
            { term: "Phospholipid", definition: "A lipid found in the cell membrane.", topic: "glossary" },
            { term: "Soluble", definition: "Able to be dissolved.", topic: "glossary" }
        ];

        // Topic names for display
        const topicNames = {
    "1": "Cell Structure",
    "2": "Transport",
    "3": "DNA & Proteins",
    "4": "Enzymes",
    "5": "Genetic Engineering",
    "6": "Respiration",
    "7": "Ecosystems",
    "8": "Distribution",
    "9": "Photosynthesis",
    "10": "Energy",
    "11": "Food Production",
    "12": "Evolution",
    "glossary": "Glossary"
};


        // Topic colors
        const topicColors = {
            "1": "#667eea",
            "2": "#4CAF50",
            "3": "#FF9800",
            "4": "#E91E63",
            "5": "#9C27B0",
            "6": "#009688",
            "glossary": "#795548"
        };

        // App state
        let currentFilter = "all";
        let currentView = "all";
        let isQuizMode = false;
        let userData = {};
        let quizState = {
            currentQuestion: 0,
            score: 0,
            questions: [],
            totalQuestions: 10
        };

        // Initialize user data from localStorage
        function initUserData() {
            const saved = localStorage.getItem('biologyFlashcardsData');
            if (saved) {
                userData = JSON.parse(saved);
            } else {
                flashcards.forEach((card, index) => {
                    userData[card.term] = {
                        mastered: false,
                        flagged: false,
                        lastReviewed: null
                    };
                });
                saveUserData();
            }
        }

        function saveUserData() {
            localStorage.setItem('biologyFlashcardsData', JSON.stringify(userData));
        }

        // Initialize flashcards
        function initFlashcards() {
            const container = document.getElementById('flashcardContainer');
            container.innerHTML = '';
            
            // Filter flashcards
            const filtered = flashcards.filter(card => {
                // Topic filter
                if (currentFilter !== "all" && card.topic !== currentFilter) return false;
                
                // View filter
                const cardData = userData[card.term];
                switch (currentView) {
                    case 'mastered': return cardData.mastered;
                    case 'unmastered': return !cardData.mastered;
                    case 'flagged': return cardData.flagged;
                    case 'unflagged': return !cardData.flagged;
                    default: return true;
                }
            });
            
            // Create flashcards
            filtered.forEach((card, index) => {
                const cardData = userData[card.term];
                const flashcard = document.createElement('div');
                flashcard.className = `flashcard`;
                flashcard.dataset.term = card.term;
                flashcard.dataset.topic = card.topic;
                
                flashcard.innerHTML = `
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <div class="card-actions">
                                <button class="card-btn master-btn ${cardData.mastered ? 'mastered' : ''}" data-action="master">
                                    <i class="fas ${cardData.mastered ? 'fa-star' : 'fa-star'}"></i>
                                </button>
                                <button class="card-btn flag-btn ${cardData.flagged ? 'flagged' : ''}" data-action="flag">
                                    <i class="fas ${cardData.flagged ? 'fa-flag' : 'fa-flag'}"></i>
                                </button>
                            </div>
                            ${cardData.mastered ? '<div class="mastered-badge"><i class="fas fa-check"></i></div>' : ''}
                            ${cardData.flagged ? '<div class="flagged-badge"><i class="fas fa-flag"></i></div>' : ''}
                            <div class="topic-tag topic-${card.topic}">${topicNames[card.topic]}</div>
                            <div class="term">${card.term}</div>
                            <div class="hint">Click to flip for definition</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="card-actions">
                                <button class="card-btn master-btn ${cardData.mastered ? 'mastered' : ''}" data-action="master">
                                    <i class="fas ${cardData.mastered ? 'fa-star' : 'fa-star'}"></i>
                                </button>
                                <button class="card-btn flag-btn ${cardData.flagged ? 'flagged' : ''}" data-action="flag">
                                    <i class="fas ${cardData.flagged ? 'fa-flag' : 'fa-flag'}"></i>
                                </button>
                            </div>
                            ${cardData.mastered ? '<div class="mastered-badge"><i class="fas fa-check"></i></div>' : ''}
                            ${cardData.flagged ? '<div class="flagged-badge"><i class="fas fa-flag"></i></div>' : ''}
                            <div class="topic-tag topic-${card.topic}">${topicNames[card.topic]}</div>
                            <div class="definition">${card.definition}</div>
                            <div class="hint">Click to flip back</div>
                        </div>
                    </div>
                `;
                
                // Add click event to flip card
                flashcard.addEventListener('click', (e) => {
                    if (!e.target.closest('.card-btn')) {
                        flashcard.classList.toggle('flipped');
                    }
                });
                
                // Add action button events
                const masterBtn = flashcard.querySelector('[data-action="master"]');
                const flagBtn = flashcard.querySelector('[data-action="flag"]');
                
                masterBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleMastery(card.term, flashcard);
                });
                
                flagBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFlag(card.term, flashcard);
                });
                
                container.appendChild(flashcard);
            });
            
            updateStats();
        }

        function toggleMastery(term, flashcard) {
            userData[term].mastered = !userData[term].mastered;
            userData[term].lastReviewed = new Date().toISOString();
            
            const masterBtn = flashcard.querySelector('[data-action="master"]');
            const masteredBadge = flashcard.querySelector('.mastered-badge');
            
            if (userData[term].mastered) {
                masterBtn.classList.add('mastered');
                masterBtn.innerHTML = '<i class="fas fa-star"></i>';
                if (!masteredBadge) {
                    const badge = document.createElement('div');
                    badge.className = 'mastered-badge';
                    badge.innerHTML = '<i class="fas fa-check"></i>';
                    flashcard.querySelector('.flashcard-front').appendChild(badge);
                    flashcard.querySelector('.flashcard-back').appendChild(badge.cloneNode(true));
                }
            } else {
                masterBtn.classList.remove('mastered');
                masterBtn.innerHTML = '<i class="far fa-star"></i>';
                if (masteredBadge) {
                    masteredBadge.remove();
                    flashcard.querySelector('.flashcard-back .mastered-badge')?.remove();
                }
            }
            
            saveUserData();
            updateStats();
        }

        function toggleFlag(term, flashcard) {
            userData[term].flagged = !userData[term].flagged;
            
            const flagBtn = flashcard.querySelector('[data-action="flag"]');
            const flaggedBadge = flashcard.querySelector('.flagged-badge');
            
            if (userData[term].flagged) {
                flagBtn.classList.add('flagged');
                flagBtn.innerHTML = '<i class="fas fa-flag"></i>';
                if (!flaggedBadge) {
                    const badge = document.createElement('div');
                    badge.className = 'flagged-badge';
                    badge.innerHTML = '<i class="fas fa-flag"></i>';
                    flashcard.querySelector('.flashcard-front').appendChild(badge);
                    flashcard.querySelector('.flashcard-back').appendChild(badge.cloneNode(true));
                }
            } else {
                flagBtn.classList.remove('flagged');
                flagBtn.innerHTML = '<i class="far fa-flag"></i>';
                if (flaggedBadge) {
                    flaggedBadge.remove();
                    flashcard.querySelector('.flashcard-back .flagged-badge')?.remove();
                }
            }
            
            saveUserData();
            updateStats();
        }

        function updateStats() {
            const total = flashcards.length;
            let mastered = 0;
            let flagged = 0;
            
            flashcards.forEach(card => {
                if (userData[card.term]?.mastered) mastered++;
                if (userData[card.term]?.flagged) flagged++;
            });
            
            const masteryPercent = (mastered / total) * 100;
            
            document.getElementById('totalCards').textContent = total;
            document.getElementById('masteredCount').textContent = mastered;
            document.getElementById('flaggedCount').textContent = flagged;
            document.getElementById('masteryProgress').style.width = `${masteryPercent}%`;
            
            // Update visible cards count
            const visible = document.querySelectorAll('.flashcard').length;
            document.getElementById('visibleCards').textContent = visible;
        }

        // Quiz functions
        function startQuiz() {
            isQuizMode = true;
            document.getElementById('modeIndicator').style.display = 'inline-block';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('subtitle').textContent = 'Quiz Mode - Test your knowledge!';
            document.getElementById('quizModeToggle').classList.add('active');
            document.getElementById('flashcardContainer').style.display = 'none';
            document.querySelector('.filter-options').style.display = 'none';
            
            // Generate quiz questions
            generateQuizQuestions();
            showNextQuestion();
        }

        function stopQuiz() {
            isQuizMode = false;
            document.getElementById('modeIndicator').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('subtitle').textContent = 'Cell Biology Unit - Click cards to flip | Use buttons to filter or flip all';
            document.getElementById('quizModeToggle').classList.remove('active');
            document.getElementById('flashcardContainer').style.display = 'grid';
            document.querySelector('.filter-options').style.display = currentView !== 'all' ? 'flex' : 'none';
        }

        function generateQuizQuestions() {
            quizState.questions = [];
            quizState.currentQuestion = 0;
            quizState.score = 0;
            
            // Get cards based on current filter
            let availableCards = flashcards;
            if (currentFilter !== "all") {
                availableCards = flashcards.filter(card => card.topic === currentFilter);
            }
            
            // Shuffle and select questions
            const shuffled = [...availableCards].sort(() => Math.random() - 0.5);
            const selected = shuffled.slice(0, Math.min(10, shuffled.length));
            
            selected.forEach(card => {
                // Get 3 other random definitions as wrong answers
                const wrongAnswers = [];
                const allCardsExceptCurrent = flashcards.filter(c => c.term !== card.term);
                const shuffledWrong = [...allCardsExceptCurrent].sort(() => Math.random() - 0.5);
                
                for (let i = 0; i < 3 && i < shuffledWrong.length; i++) {
                    wrongAnswers.push(shuffledWrong[i].definition);
                }
                
                // Combine and shuffle answers
                const answers = [card.definition, ...wrongAnswers].sort(() => Math.random() - 0.5);
                
                quizState.questions.push({
                    term: card.term,
                    correctAnswer: card.definition,
                    answers: answers
                });
            });
            
            quizState.totalQuestions = quizState.questions.length;
        }

        function showNextQuestion() {
            if (quizState.currentQuestion >= quizState.questions.length) {
                endQuiz();
                return;
            }
            
            const question = quizState.questions[quizState.currentQuestion];
            document.getElementById('quizQuestion').textContent = `What is the definition of "${question.term}"?`;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const option = document.createElement('div');
                option.className = 'quiz-option';
                option.textContent = answer;
                option.dataset.index = index;
                
                option.addEventListener('click', () => selectAnswer(option, answer === question.correctAnswer));
                optionsContainer.appendChild(option);
            });
            
            document.getElementById('quizStats').textContent = 
                `Question ${quizState.currentQuestion + 1} of ${quizState.totalQuestions} | Score: ${quizState.score}/${quizState.currentQuestion}`;
            
            document.getElementById('quizNext').style.display = 'none';
        }

        function selectAnswer(option, isCorrect) {
            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (isCorrect) {
                option.classList.add('correct');
                quizState.score++;
            } else {
                option.classList.add('incorrect');
                // Highlight correct answer
                document.querySelectorAll('.quiz-option').forEach(opt => {
                    if (opt.textContent === quizState.questions[quizState.currentQuestion].correctAnswer) {
                        opt.classList.add('correct');
                    }
                });
            }
            
            document.getElementById('quizNext').style.display = 'block';
        }

        function endQuiz() {
            const scorePercent = (quizState.score / quizState.totalQuestions) * 100;
            document.getElementById('quizQuestion').innerHTML = `
                <h2>Quiz Complete!</h2>
                <p>Your score: <strong>${quizState.score}/${quizState.totalQuestions}</strong> (${scorePercent.toFixed(1)}%)</p>
                <p>${scorePercent >= 80 ? 'Excellent work!' : scorePercent >= 60 ? 'Good job!' : 'Keep practicing!'}</p>
            `;
            
            document.getElementById('quizOptions').innerHTML = '';
            document.getElementById('quizNext').textContent = 'Restart Quiz';
            document.getElementById('quizNext').onclick = () => {
                generateQuizQuestions();
                quizState.currentQuestion = 0;
                quizState.score = 0;
                showNextQuestion();
            };
            
            document.getElementById('quizStats').textContent = `Final Score: ${quizState.score}/${quizState.totalQuestions}`;
        }

        // Event Listeners
        document.querySelectorAll('.topic-filter').forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                document.querySelectorAll('.topic-filter').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                // Update filter and refresh
                currentFilter = button.dataset.topic;
                if (isQuizMode) {
                    startQuiz();
                } else {
                    initFlashcards();
                }
            });
        });

        document.getElementById('flipAllTerms').addEventListener('click', () => {
            document.querySelectorAll('.flashcard').forEach(card => {
                card.classList.remove('flipped');
            });
        });

        document.getElementById('flipAllDefinitions').addEventListener('click', () => {
            document.querySelectorAll('.flashcard').forEach(card => {
                card.classList.add('flipped');
            });
        });

        document.getElementById('quizModeToggle').addEventListener('click', () => {
            if (isQuizMode) {
                stopQuiz();
            } else {
                startQuiz();
            }
        });

        document.getElementById('toggleViewControls').addEventListener('click', () => {
            const viewControls = document.getElementById('viewControls');
            const isVisible = viewControls.style.display === 'flex';
            viewControls.style.display = isVisible ? 'none' : 'flex';
        });

        document.getElementById('quizNext').addEventListener('click', () => {
            quizState.currentQuestion++;
            showNextQuestion();
        });

        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                currentView = button.dataset.view;
                document.getElementById('viewFilterText').textContent = 
                    currentView === 'all' ? 'All' :
                    currentView === 'mastered' ? 'Mastered' :
                    currentView === 'unmastered' ? 'Not Mastered' :
                    currentView === 'flagged' ? 'Flagged' : 'Not Flagged';
                
                initFlashcards();
            });
        });

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            initUserData();
            initFlashcards();
        });
    </script>
</body>
</html>
